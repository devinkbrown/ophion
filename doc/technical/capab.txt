Server capabilities
William Pitcock <nenolod -at- nenolod.net>
-------------------

Not all TSora IRCd's support these.

QS          - supports Quit Storm (SQUIT does not have to send recursive quits)
EX          - supports ban exceptions (+e)
CHW         - supports messages directed to channel operators only i.e. @#channel
IE          - supports invite exceptions (+I)
EOB         - supports end of burst notification (EOB token)
KLN         - supports remote KLINE
UNKLN       - supports remote UNKLINE
GLN         - supports hybrid7-style GLINE (:oper GLINE user host :reason)
HOPS        - supports halfops (+h -- %<nick>)
HUB         - denotes that the target server is a HUB
AOPS        - supports anonymous ops (+a, op hiding/op status hiding)
KNOCK       - supports KNOCK extension (request invite to +ikl channel)
TBURST      - supports old TBURST command [broken, don't use.]
TB          - supports new TB command [do use.]
PARA        - supports sending invite notices via INVITE from server
ENCAP       - supports message encapsulation
SERVICES    - supports ratbox's services extensions
SAVE        - supports SAVE extension (friendlier alternative to KILL on nick collide)
RSFNC       - supports RSFNC extension (forcenick)
CLUSTER     - supports remote XLINE, UNXLINE, RESV, UNRESV and LOCOPS
EUID        - supports EUID, non-ENCAP CHGHOST and NICKDELAY
ZIP         - supports ziplinks
ENC         - supports encryption (cryptlinks)
AUTOSID     - supports automatic SID assignment via SVSSID

The KLN, UNKLN and CLUSTER capabilities do not apply to klines, xlines
and resvs sent over ENCAP.

Disabling ban/invite exceptions in ircd.conf does not remove the EX/IE capabs.

AUTOSID capability
------------------

Ophion servers that generate their SID automatically (no `sid =` in
serverinfo{}) advertise AUTOSID during the CAPAB exchange.

When a hub detects a SID collision from an AUTOSID-capable server, it
sends `SVSSID :<new_sid>` to assign an available SID before closing the
link.  The leaf adopts the new SID and reconnects automatically.

Servers with an explicit `sid =` in serverinfo{} do not advertise
AUTOSID and will not accept SVSSID.

IRCv3 client capabilities
--------------------------

The following client capabilities are advertised to connecting clients
via CAP LS.  Capabilities registered in the core (ircd/s_serv.c) are
always available; those registered by modules require the module to be
loaded.

Core capabilities (ircd/s_serv.c):

  multi-prefix        Shows all prefix modes in NAMES and WHO replies.
  account-notify      Notifies clients when a shared user's account changes.
  extended-join       Includes account and realname in JOIN messages.
  away-notify         Notifies clients when a shared user's away status changes.
  userhost-in-names   Includes user@host in NAMES replies.
  cap-notify          Notifies clients when available capabilities change.
  chghost             Notifies clients when a shared user's host changes.
  echo-message        Echoes sent PRIVMSG/NOTICE back to the sending client.
  invite-notify       Notifies channel members when someone is INVITEd.
  message-tags        Enables IRCv3 message tags and the TAGMSG command.
  batch               Groups related messages with BATCH start/end markers.
  setname             Allows clients to change their realname via SETNAME.
  labeled-response    Associates server responses with the triggering command.
  standard-replies    Standardised FAIL/WARN/NOTE reply format.
  draft/typing        Advisory typing indicator (relayed via TAGMSG).
  draft/read-marker   Read position synchronisation (m_read_marker).

Module capabilities:

  sasl                   SASL authentication (m_sasl_core).
  tls                    STARTTLS connection upgrade (m_starttls).
  server-time            Adds server timestamp tag to messages (cap_server_time).
  account-tag            Adds account name tag to messages (cap_account_tag).
  sts                    Strict Transport Security policy (cap_sts).
  msgid                  Unique message identifiers (m_chathistory).
  draft/chathistory      Message history retrieval (m_chathistory).
  draft/event-playback   Event playback in history batches (m_chathistory).
  draft/multiline        Multi-line message batches (m_multiline).
